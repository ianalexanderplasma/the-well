<!DOCTYPE html>
<html>
<head>
	<title>The Well - Live</title>
	<script src='https://meet.jit.si/external_api.js'></script>
</head>

<style type="text/css">

	html, body {
		margin: 0;
		padding:0; 
	}

	#meet {
		height: calc(95vh - 41px);
	}

	#logo {
		text-align: center;
		font-family: 'Karla', sans-serif;

	}

	#largeVideoContainer {
		background-color: #000 !important;
	}
	
</style>

<body>

	<h1 id="logo">THE<span style="font-size: 36px; color: #2752ff;">‚óè</span>WELL</h1>

	<div id="meet"></div>

</body>

<script type="text/javascript">

// create a UUID to help create a unique URL
function uuidv4() {
  return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>
    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
  );
}

var username  = 'Ian'
var uuid = uuidv4();
var meeting_id = 'well-'+uuid;

console.log(meeting_id);

const domain = 'meet.jit.si';
const options = {
    roomName: meeting_id,
    width: '100%',
    height: '100%',
    parentNode: document.querySelector('#meet')
};

const api = new JitsiMeetExternalAPI(domain, options);

// set new password for channel
api.addEventListener('participantRoleChanged', function(event) {
    if (event.role === "moderator") {
        api.executeCommand('password', 'well');
    }
});

// join a protected channel
api.on('passwordRequired', function (){
    api.executeCommand('password', meeting_id);		// we could make this an actual pass instead  of the meeting id but seems like a decent roadblock to prevent access
});

// set my display name
api.executeCommand('displayName', username);

// set the subject of the conference.
api.executeCommand('subject', 'The Well');

// invite new participants to the call with the following API function:
// api.invite([ {...}, {...}, {...} ]).then(() => {
//     // success
// }).catch(() => {
//     // failure
// });


</script>
</html>